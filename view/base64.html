<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>文件上传表单</title>
    <script type="text/javascript" src="http://cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <script src="http://shcdn.iceinto.com/js/exif.min.js" type="text/javascript"></script>
    <script src="http://shcdn.iceinto.com/js/processImg.min.js" type="text/javascript"></script>
</head>

<body>
    <h3>文件上传：</h3>
    <div class="up-id">
        <div class="up-idbg" data-value="0">
            <img id="showimage1" src="" alt="">
        </div>
        <ul class="up-idbtn">
            <li>
                <input id="upface1" class="UpFaceInput" type="file">
            </li>
        </ul>
    </div>
</body>
<script>
    var WapImgLoad = {};
    WapImgLoad.download = function (imgdata, cb) {
        console.log(imgdata)
        var imgUrl = imgdata.split(',')[1]
        $.ajax({
            url: "http://www.daoxila.com/GongJu/activity/1.0/marriage/down_base64",
            data: { imgUrl: imgUrl },
            type: 'post',
            dataType: "json",
            success: function (data) {
                cb(data);
            }
        });
    };

    compressImg('upface1', 'showimage1', 640, function (src) {
        WapImgLoad.download(src, function (data) {
            console.log('上传并下载：' + JSON.stringify(data))
        });
    });
</script>

</html>